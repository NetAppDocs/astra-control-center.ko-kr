---
sidebar: sidebar 
permalink: get-started/acc_operatorhub_install.html 
keywords: how to install astra control center, operator, operatorhub, openshift, install astra control center operator 
summary: Red Hat OpenShift를 사용하는 경우 운영자를 사용하여 Astra Control Center를 설치할 수 있습니다. 
---
= OpenShift OperatorHub를 사용하여 Astra Control Center를 설치합니다
:hardbreaks:
:allow-uri-read: 
:icons: font
:imagesdir: ../media/get-started/


[role="lead"]
Red Hat OpenShift를 사용하는 경우 Red Hat 공인 운영자를 사용하여 Astra Control Center를 설치할 수 있습니다. 이 절차를 사용하여 에서 Astra Control Center를 설치합니다 https://catalog.redhat.com/software/operators/explore["Red Hat 에코시스템 카탈로그"^] 또는 Red Hat OpenShift Container Platform 사용.

이 절차를 완료한 후에는 설치 절차로 돌아가 를 완료해야 합니다 link:../get-started/install_acc.html#verify-system-status["나머지 단계"^] 설치 성공 여부를 확인하고 로그온합니다.

.필요한 것
* * 환경 전제 조건 충족 *: link:requirements.html["설치를 시작하기 전에 Astra Control Center 구축을 위한 환경을 준비합니다"^].
* * 정상적인 클러스터 운영자 및 API 서비스 *:
+
** OpenShift 클러스터에서 모든 클러스터 운영자가 정상 상태인지 확인합니다.
+
[source, console]
----
oc get clusteroperators
----
** OpenShift 클러스터에서 모든 API 서비스가 정상 상태인지 확인합니다.
+
[source, console]
----
oc get apiservices
----


* * FQDN 주소 *: 데이터 센터의 Astra Control Center에 대한 FQDN 주소를 얻습니다.
* * OpenShift Permissions *: Red Hat OpenShift Container Platform에 대한 필수 권한과 액세스를 얻어 설명된 설치 단계를 수행합니다.
* * cert-manager 구성됨 *: 인증서 관리자가 클러스터에 이미 있으면 일부를 수행해야 합니다 link:../get-started/cert-manager-prereqs.html["필수 단계"^] 따라서 Astra Control Center는 자체 인증 관리자를 설치하지 않습니다. 기본적으로 Astra Control Center는 설치 중에 자체 인증 관리자를 설치합니다.
* * Kubernetes 수신 컨트롤러 *: 클러스터의 로드 밸런싱과 같은 서비스에 대한 외부 액세스를 관리하는 Kubernetes 수신 컨트롤러가 있는 경우 Astra Control Center와 함께 사용하도록 설정해야 합니다.
+
.. 연산자 네임스페이스 만들기:
+
[listing]
----
oc create namespace netapp-acc-operator
----
.. link:../get-started/install_acc.html#set-up-ingress-for-load-balancing["설정을 완료합니다"^] 수신 컨트롤러 유형에 적합합니다.




.단계
* <<Astra Control Center 번들을 다운로드하고 포장을 풉니다>>
* <<NetApp Astra kubtl 플러그인을 설치합니다>>
* <<이미지를 로컬 레지스트리에 추가합니다>>
* <<운영자 설치 페이지를 찾으십시오>>
* <<운전자를 설치합니다>>
* <<Astra Control Center를 설치합니다>>




== Astra Control Center 번들을 다운로드하고 포장을 풉니다

. 에서 Astra Control Center 번들('Astra-control-center-[version].tar.gz')을 다운로드합니다 https://mysupport.netapp.com/site/products/all/details/astra-control-center/downloads-tab["NetApp Support 사이트"^].
. 에서 Astra Control Center 인증서 및 키의 지퍼를 다운로드합니다 https://mysupport.netapp.com/site/products/all/details/astra-control-center/downloads-tab["NetApp Support 사이트"^].
. (선택 사항) 번들의 서명을 확인합니다.
+
[source, console]
----
openssl dgst -sha256 -verify AstraControlCenter-public.pub -signature astra-control-center-[version].tar.gz.sig astra-control-center-[version].tar.gz
----
. 이미지 추출:
+
[source, console]
----
tar -vxzf astra-control-center-[version].tar.gz
----




== NetApp Astra kubtl 플러그인을 설치합니다

NetApp Astra kubtl 명령줄 플러그인은 Astra Control Center 배포 및 업그레이드와 관련된 일반적인 작업을 수행할 때 시간을 절약해 줍니다.

.필요한 것
NetApp은 다양한 CPU 아키텍처 및 운영 체제에 대한 플러그인 바이너리를 제공합니다. 이 작업을 수행하기 전에 사용 중인 CPU 및 운영 체제를 알아야 합니다.

.단계
. 사용 가능한 NetApp Astra kubectl 플러그인 바이너리를 나열하고 운영 체제 및 CPU 아키텍처에 필요한 파일 이름을 적어 주십시오.
+

NOTE: kubbeck 플러그인 라이브러리는 tar 번들의 일부이며 폴더에 압축이 풀립니다 `kubectl-astra`.

+
[source, console]
----
ls kubectl-astra/
----
. 올바른 바이너리를 현재 경로로 이동하고 이름을 로 변경합니다 `kubectl-astra`:
+
[source, console]
----
cp kubectl-astra/<binary-name> /usr/local/bin/kubectl-astra
----




== 이미지를 로컬 레지스트리에 추가합니다

. 용기 엔진에 적합한 단계 시퀀스를 완료합니다.


[role="tabbed-block"]
====
.Docker 를 참조하십시오
--
. 타볼의 루트 디렉토리로 변경합니다. 이 파일과 디렉토리가 표시됩니다.
+
`acc.manifest.bundle.yaml`
`acc/`

. [[substep_image_local_registry_push]] Astra Control Center 이미지 디렉토리에 있는 패키지 이미지를 로컬 레지스트리로 푸시합니다. 를 실행하기 전에 다음 대체 작업을 수행합니다 `push-images` 명령:
+
** <BUNDLE_FILE>를 Astra Control 번들 파일의 이름으로 바꿉니다 (`acc.manifest.bundle.yaml`)를 클릭합니다.
** <MY_FULL_REGISTRY_PATH>를 Docker 저장소의 URL로 바꿉니다. 예를 들어, https://exampledownloads.jfrog.io/docker-astra-control/v1/[].
** <MY_REGISTRY_USER>를 사용자 이름으로 바꿉니다.
** <MY_REGISTRY_TOKEN>를 레지스트리에 대한 인증된 토큰으로 바꿉니다.
+
[source, console]
----
kubectl astra packages push-images -m <BUNDLE_FILE> -r <MY_FULL_REGISTRY_PATH> -u <MY_REGISTRY_USER> -p <MY_REGISTRY_TOKEN>
----




--
.팟맨
--
. 타볼의 루트 디렉토리로 변경합니다. 이 파일과 디렉토리가 표시됩니다.
+
`acc.manifest.bundle.yaml`
`acc/`

. 레지스트리에 로그인합니다.
+
[source, console]
----
podman login <MY_FULL_REGISTRY_PATH>
----
. 설명에 명시된 대로 <your_registry> 대체를 만들어 다음 스크립트를 실행합니다.
+
[source, console]
----
export REGISTRY=<YOUR_REGISTRY>
export PACKAGENAME=acc
export PACKAGEVERSION=22.11.0-82
export DIRECTORYNAME=acc
for astraImageFile in $(ls ${DIRECTORYNAME}/images/*.tar) ; do
  # Load to local cache
  astraImage=$(podman load --input ${astraImageFile} | sed 's/Loaded image(s): //')

  # Remove path and keep imageName.
  astraImageNoPath=$(echo ${astraImage} | sed 's:.*/::')

  # Tag with local image repo.
  podman tag ${astraImage} ${REGISTRY}/netapp/astra/${PACKAGENAME}/${PACKAGEVERSION}/${astraImageNoPath}

  # Push to the local repo.
  podman push ${REGISTRY}/netapp/astra/${PACKAGENAME}/${PACKAGEVERSION}/${astraImageNoPath}
done
----


--
====


== 운영자 설치 페이지를 찾으십시오

. 운영자 설치 페이지에 액세스하려면 다음 절차 중 하나를 완료하십시오.
+
** Red Hat OpenShift 웹 콘솔:
+
... OpenShift Container Platform UI에 로그인합니다.
... 측면 메뉴에서 * Operators > OperatorHub * 를 선택합니다.
... NetApp Astra Control Center 운영자를 검색하여 선택합니다.


+
image:openshift_operatorhub.png["Astra Control Center 설치 페이지"]

** Red Hat 에코시스템 카탈로그:
+
... NetApp Astra Control Center를 선택합니다 https://catalog.redhat.com/software/operators/detail/611fd22aaf489b8bb1d0f274["운영자"^].
... 배포 및 사용 * 을 선택합니다.




+
image:red_hat_catalog.png["Astra Control Center 개요 페이지"]





== 운전자를 설치합니다

. Install Operator * 페이지를 완료하고 운영자를 설치합니다.
+

NOTE: 운영자는 모든 클러스터 네임스페이스에서 사용할 수 있습니다.

+
.. 운영자 설치의 일부로 운영자 네임스페이스 또는 'NetApp-acc-operator' 네임스페이스가 자동으로 생성됩니다.
.. 수동 또는 자동 승인 전략을 선택합니다.
+

NOTE: 수동 승인이 권장됩니다. 클러스터당 하나의 운영자 인스턴스만 실행 중이어야 합니다.

.. 설치 * 를 선택합니다.
+

NOTE: 수동 승인 전략을 선택한 경우 이 운영자에 대한 수동 설치 계획을 승인하라는 메시지가 표시됩니다.



. 콘솔에서 OperatorHub 메뉴로 이동하여 운영자가 성공적으로 설치되었는지 확인합니다.




== Astra Control Center를 설치합니다

. Astra Control Center 운영자의 * Astra Control Center * 탭에 있는 콘솔에서 * Create AstraControlCenter * 를 선택합니다.image:openshift_acc-operator_details.png["Astra Control Center 운영자 페이지"]
. 'Create AstraControlCenter' 양식 필드를 작성합니다.
+
.. Astra Control Center 이름을 유지하거나 조정합니다.
.. Astra Control Center에 대한 레이블을 추가합니다.
.. 자동 지원을 활성화 또는 비활성화합니다. 자동 지원 기능을 유지하는 것이 좋습니다.
.. Astra Control Center FQDN 또는 IP 주소를 입력합니다. 들어가지마 `http://` 또는 `https://` 를 입력합니다.
.. Astra Control Center 버전을 입력합니다(예: 22.04.1).
.. 계정 이름, 이메일 주소 및 관리자 성을 입력합니다.
.. 의 볼륨 재확보 정책을 선택합니다 `Retain`, `Recycle`, 또는 `Delete`. 기본값은 입니다 `Retain`.
.. 수신 유형을 선택합니다.
+
*** * 일반 * (`ingressType: "Generic"`) (기본값)
+
다른 수신 컨트롤러를 사용 중이거나 자체 수신 컨트롤러를 사용하려는 경우 이 옵션을 사용하십시오. Astra Control Center를 배포한 후 을 구성해야 합니다 link:../get-started/install_acc.html#set-up-ingress-for-load-balancing["수신 컨트롤러"^] URL을 사용하여 Astra Control Center를 표시합니다.

*** * AccTraefik * (`ingressType: "AccTraefik"`)
+
수신 컨트롤러를 구성하지 않으려는 경우 이 옵션을 사용하십시오. 그러면 Astra Control Center가 구축됩니다 `traefik` Kubernetes 로드 밸런서 유형 서비스로서의 게이트웨이

+
Astra Control Center는 "loadbalancer" 유형의 서비스를 사용합니다. (`svc/traefik` Astra Control Center 네임스페이스에서), 액세스 가능한 외부 IP 주소를 할당해야 합니다. 로드 밸런서가 사용자 환경에서 허용되고 아직 로드 밸런서가 구성되어 있지 않은 경우 MetalLB 또는 다른 외부 서비스 로드 밸런서를 사용하여 외부 IP 주소를 서비스에 할당할 수 있습니다. 내부 DNS 서버 구성에서 Astra Control Center에 대해 선택한 DNS 이름을 부하 분산 IP 주소로 지정해야 합니다.

+

NOTE: "로드 밸런서" 및 수신 서비스 유형에 대한 자세한 내용은 을 참조하십시오 link:../get-started/requirements.html["요구 사항"^].



.. 이미지 레지스트리 * 에서 로컬 컨테이너 이미지 레지스트리 경로를 입력합니다. 들어가지마 `http://` 또는 `https://` 를 입력합니다.
.. 인증이 필요한 이미지 레지스트리를 사용하는 경우 이미지 암호를 입력합니다.
+

NOTE: 인증이 필요한 레지스트리를 사용하는 경우 <<레지스트리 암호를 만듭니다,클러스터에 암호를 생성합니다>>.

.. 관리자의 이름을 입력합니다.
.. 리소스 확장을 구성합니다.
.. 기본 스토리지 클래스를 제공합니다.
+

NOTE: 기본 스토리지 클래스가 구성된 경우 기본 주석이 있는 유일한 스토리지 클래스인지 확인합니다.

.. CRD 처리 기본 설정을 정의합니다.
+

NOTE: CRD 옵션에 대한 자세한 내용은 을 참조하십시오 https://docs.netapp.com/us-en/astra-control-center/get-started/acc_cluster_cr_options.html["이 섹션을 참조하십시오"^].



. YAML 보기를 선택하여 선택한 설정을 검토합니다.
. Create를 선택합니다.




== 레지스트리 암호를 만듭니다

인증이 필요한 레지스트리를 사용하는 경우 OpenShift 클러스터에서 암호를 만들고 에 암호 이름을 입력합니다 `Create AstraControlCenter` 양식 필드.

. Astra Control Center 운영자용 네임스페이스를 생성합니다.
+
[listing]
----
oc create ns [netapp-acc-operator or custom namespace]
----
. 이 네임스페이스에 암호 만들기:
+
[listing]
----
oc create secret docker-registry astra-registry-cred n [netapp-acc-operator or custom namespace] --docker-server=[your_registry_path] --docker username=[username] --docker-password=[token]
----
+

NOTE: Astra Control은 Docker 레지스트리 비밀만 지원합니다.

. 의 나머지 필드를 작성합니다 <<Astra Control Center를 설치합니다,Create AstraControlCenter 양식 필드>>.




== 다음 단계

를 완료합니다 link:../get-started/install_acc.html#verify-system-status["나머지 단계"^] Astra Control Center가 성공적으로 설치되었는지 확인하려면 수신 컨트롤러(옵션)를 설정하고 UI에 로그인합니다. 또한 를 수행해야 합니다 link:setup_overview.html["설정 작업"^] 설치 완료 후.
